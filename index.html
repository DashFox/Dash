<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"><title>Dashboard - Brand</title><meta name="theme-color" content="rgb(255,255,255)"><meta property="title" content="DashFox Dash"><meta name="twitter:description" content="See vital information about your DashFox website"><meta name="twitter:image" content="https://dash.dashfox.shop/assets/img/dashfox_logo.png"><meta property="og:type" content="website"><meta name="description" content="See vital information about your DashFox website"><meta property="og:image" content="https://dash.dashfox.shop/assets/img/dashfox_logo.png"><meta name="twitter:title" content="DashFox Dash"><link rel="icon" type="image/png" sizes="512x512" href="assets/img/dashfox_logo.png"><link rel="icon" type="image/png" sizes="512x512" href="assets/img/dashfox_logo.png"><link rel="icon" type="image/png" sizes="512x512" href="assets/img/dashfox_logo.png"><link rel="icon" type="image/png" sizes="512x512" href="assets/img/dashfox_logo.png"><link rel="icon" type="image/png" sizes="512x512" href="assets/img/dashfox_logo.png"><link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css"><link rel="manifest" href="manifest.json"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.min.css"><link rel="stylesheet" href="assets/fonts/fontawesome5-overrides.min.css"><link rel="stylesheet" href="assets/css/styles.min.css"><title>DashFox Dash</title>
</head><body id="page-top"><div id="wrapper"><nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0" style="display: none;"><div class="container-fluid d-flex flex-column p-0"><a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="#"><div class="sidebar-brand-icon"><i class="fa fa-angle-double-right"></i></div><div class="sidebar-brand-text mx-3"><span>DashFox</span></div></a><hr class="sidebar-divider my-0"><ul class="navbar-nav text-light" id="accordionSidebar"><li class="nav-item"><a class="nav-link active" href="index.html"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li><li class="nav-item"><a class="nav-link" href="profile.html"><i class="fas fa-user"></i><span>Mine hjemmesider</span></a></li><li class="nav-item"><a class="nav-link" href="table.html"><i class="fas fa-table"></i><span>Table</span></a></li><li class="nav-item"><a class="nav-link" href="login.html"><i class="far fa-user-circle"></i><span>Login</span></a></li><li class="nav-item"><a class="nav-link" href="register.html"><i class="fas fa-user-circle"></i><span>Register</span></a></li></ul><div class="text-center d-none d-md-inline"><button class="btn rounded-circle border-0" id="sidebarToggle" type="button"></button></div></div></nav><div class="d-flex flex-column" id="content-wrapper"><div id="content"><nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top"><div class="container-fluid"><form class="d-none d-sm-inline-block me-auto ms-md-3 my-2 my-md-0 mw-100 navbar-search" style="display: none!important;"><div class="input-group"><input class="bg-light form-control border-0 small" type="text" id="showToken" placeholder="Your token"><button class="btn btn-primary py-0" id="updateToken" type="button"><i class="fas fa-check"></i></button></div></form><h1>DashFox Dash</h1><ul class="navbar-nav flex-nowrap ms-auto"><li class="nav-item dropdown no-arrow"><div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="d-none d-lg-inline me-2 text-gray-600 small" id="dName">DomainName</span><img class="border rounded-circle img-profile" id="dIco"></a><div class="dropdown-menu shadow dropdown-menu-end animated--grow-in"><a class="dropdown-item" href="settings.html"><i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Settings</a><div class="dropdown-divider"></div><a class="dropdown-item" id="signOutBtn"><i class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Logout</a></div></div></li></ul></div></nav><div class="container-fluid"><div class="d-sm-flex justify-content-between align-items-center mb-4"><h3 class="text-dark mb-0" id="dNameBig">Dashboard</h3><a class="btn btn-primary" role="button" href="index.html"><i class="fa fa-refresh fa-sm text-white-50"></i>&nbsp;Refresh</a></div><div class="row"><div class="col-md-6 col-xl-3 mb-4"><div class="card shadow border-start-success py-2"><div class="card-body"><div class="row align-items-center no-gutters"><div class="col me-2"><div class="text-uppercase text-success fw-bold text-xs mb-1"><span>Visitors Today</span></div><div class="text-dark fw-bold h5 mb-0"><span id="visitsToday_">Visitors</span></div></div><div class="col-auto"><i class="fas fa-external-link-square-alt fa-2x text-gray-300"></i></div></div></div></div></div><div class="col-md-6 col-xl-3 mb-4"><!-- Start: Card Warning --><div class="card shadow border-start-warning py-2"><div class="card-body"><div class="row align-items-center no-gutters"><div class="col me-2"><div class="text-uppercase text-warning fw-bold text-xs mb-1"><span id="visitsSince">Total Visitors</span></div><div class="text-dark fw-bold h5 mb-0"><span id="visitsTotal_">Visitors</span></div></div><div class="col-auto"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-cursor-fill fa-2x text-gray-300">
  <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"></path>
</svg></div></div></div></div><!-- End: Card Warning --></div><div class="col-md-6 col-xl-3 mb-4"><div class="card shadow border-start-success py-2"><div class="card-body"><div class="row align-items-center no-gutters"><div class="col me-2"><div class="text-uppercase text-success fw-bold text-xs mb-1"><span>total cached</span></div><div class="text-dark fw-bold h5 mb-0"><span id="bytesCached">Bytes</span></div></div><div class="col-auto"><i class="material-icons fa-2x text-gray-300">cached</i></div></div></div></div></div><div class="col"><div class="card shadow border-start-primary py-2"><div class="card-body"><div class="row align-items-center no-gutters"><div class="col me-2"><div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>Total bytes</span></div><div class="text-dark fw-bold h5 mb-0"><span id="bytesTotal">Bytes</span></div></div><div class="col-auto"><i class="fas fa-database fa-2x text-gray-300"></i></div></div></div></div></div></div><!-- Start: Chart --><div class="row" style="margin-top: 27px;"><div class="col-lg-7 col-xl-8"><div class="card shadow mb-4"><div class="card-header d-flex justify-content-between align-items-center"><h6 class="text-primary fw-bold m-0">Unique Visits</h6></div><div class="card-body"><div class="chart-area"><canvas data-bss-chart="{&quot;type&quot;:&quot;line&quot;,&quot;data&quot;:{&quot;labels&quot;:[],&quot;datasets&quot;:[{&quot;label&quot;:&quot;&quot;,&quot;fill&quot;:true,&quot;data&quot;:[&quot;&quot;]}]},&quot;options&quot;:{&quot;maintainAspectRatio&quot;:false,&quot;legend&quot;:{&quot;display&quot;:false,&quot;labels&quot;:{&quot;fontStyle&quot;:&quot;normal&quot;}},&quot;title&quot;:{&quot;fontStyle&quot;:&quot;normal&quot;},&quot;scales&quot;:{&quot;xAxes&quot;:[{&quot;gridLines&quot;:{&quot;color&quot;:&quot;rgb(234, 236, 244)&quot;,&quot;zeroLineColor&quot;:&quot;rgb(234, 236, 244)&quot;,&quot;drawBorder&quot;:false,&quot;drawTicks&quot;:false,&quot;borderDash&quot;:[&quot;2&quot;],&quot;zeroLineBorderDash&quot;:[&quot;2&quot;],&quot;drawOnChartArea&quot;:false},&quot;ticks&quot;:{&quot;fontColor&quot;:&quot;#858796&quot;,&quot;fontStyle&quot;:&quot;normal&quot;,&quot;padding&quot;:20}}],&quot;yAxes&quot;:[{&quot;gridLines&quot;:{&quot;color&quot;:&quot;rgb(234, 236, 244)&quot;,&quot;zeroLineColor&quot;:&quot;rgb(234, 236, 244)&quot;,&quot;drawBorder&quot;:false,&quot;drawTicks&quot;:false,&quot;borderDash&quot;:[&quot;2&quot;],&quot;zeroLineBorderDash&quot;:[&quot;2&quot;]},&quot;ticks&quot;:{&quot;fontColor&quot;:&quot;#858796&quot;,&quot;fontStyle&quot;:&quot;normal&quot;,&quot;padding&quot;:20}}]}}}"></canvas></div></div></div></div><div class="col-lg-5 col-xl-4"><div class="card shadow mb-4"><div class="card-header d-flex justify-content-between align-items-center"><h6 class="text-primary fw-bold m-0" id="bytesSince">Bytes since&nbsp;</h6></div><div class="card-body"><div class="chart-area"><canvas data-bss-chart="{&quot;type&quot;:&quot;doughnut&quot;,&quot;data&quot;:{&quot;labels&quot;:[&quot;Direct&quot;,&quot;Social&quot;,&quot;Referral&quot;],&quot;datasets&quot;:[]},&quot;options&quot;:{&quot;maintainAspectRatio&quot;:false,&quot;legend&quot;:{&quot;display&quot;:false,&quot;labels&quot;:{&quot;fontStyle&quot;:&quot;normal&quot;}},&quot;title&quot;:{&quot;fontStyle&quot;:&quot;normal&quot;}}}"></canvas></div><div class="text-center small mt-4"><span class="me-2"><i class="fas fa-circle text-primary" style="color: #4e73df;"></i>&nbsp;Not Cached</span><span class="me-2"><i class="fas fa-circle text-success" style="color: #1cc88a;"></i>&nbsp;Cached</span></div></div></div></div></div><!-- End: Chart --><div class="row" style="display: none;"><div class="col-lg-6 mb-4"><div class="card shadow mb-4"><div class="card-header py-3"><h6 class="text-primary fw-bold m-0">Projects</h6></div><div class="card-body"><h4 class="small fw-bold">Server migration<span class="float-end">20%</span></h4><div class="progress mb-4">
			<div class="progress-bar bg-danger" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;"><span class="visually-hidden">20%</span></div>
		</div><h4 class="small fw-bold">Sales tracking<span class="float-end">40%</span></h4><div class="progress mb-4">
			<div class="progress-bar bg-warning" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;"><span class="visually-hidden">40%</span></div>
		</div><h4 class="small fw-bold">Customer Database<span class="float-end">60%</span></h4><div class="progress mb-4">
			<div class="progress-bar bg-primary" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"><span class="visually-hidden">60%</span></div>
		</div><h4 class="small fw-bold">Payout Details<span class="float-end">80%</span></h4><div class="progress mb-4">
			<div class="progress-bar bg-info" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%;"><span class="visually-hidden">80%</span></div>
		</div><h4 class="small fw-bold">Account setup<span class="float-end">Complete!</span></h4><div class="progress mb-4">
			<div class="progress-bar bg-success" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"><span class="visually-hidden">100%</span></div>
		</div></div></div><div class="card shadow mb-4"><div class="card-header py-3"><h6 class="text-primary fw-bold m-0">Todo List</h6></div><ul class="list-group list-group-flush"><li class="list-group-item"><div class="row align-items-center no-gutters"><div class="col me-2"><h6 class="mb-0"><strong>Lunch meeting</strong></h6><span class="text-xs">10:30 AM</span></div><div class="col-auto"><div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-1"><label class="form-check-label" for="formCheck-1"></label></div></div></div></li><li class="list-group-item"><div class="row align-items-center no-gutters"><div class="col me-2"><h6 class="mb-0"><strong>Lunch meeting</strong></h6><span class="text-xs">11:30 AM</span></div><div class="col-auto"><div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-2"><label class="form-check-label" for="formCheck-2"></label></div></div></div></li><li class="list-group-item"><div class="row align-items-center no-gutters"><div class="col me-2"><h6 class="mb-0"><strong>Lunch meeting</strong></h6><span class="text-xs">12:30 AM</span></div><div class="col-auto"><div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-3"><label class="form-check-label" for="formCheck-3"></label></div></div></div></li></ul></div></div><div class="col"><div class="row"><div class="col-lg-6 mb-4"><div class="card textwhite bg-primary text-white shadow"><div class="card-body"><p class="m-0">Primary</p><p class="text-white-50 small m-0">#4e73df</p></div></div></div><div class="col-lg-6 mb-4"><div class="card textwhite bg-success text-white shadow"><div class="card-body"><p class="m-0">Success</p><p class="text-white-50 small m-0">#1cc88a</p></div></div></div><div class="col-lg-6 mb-4"><div class="card textwhite bg-info text-white shadow"><div class="card-body"><p class="m-0">Info</p><p class="text-white-50 small m-0">#36b9cc</p></div></div></div><div class="col-lg-6 mb-4"><div class="card textwhite bg-warning text-white shadow"><div class="card-body"><p class="m-0">Warning</p><p class="text-white-50 small m-0">#f6c23e</p></div></div></div><div class="col-lg-6 mb-4"><div class="card textwhite bg-danger text-white shadow"><div class="card-body"><p class="m-0">Danger</p><p class="text-white-50 small m-0">#e74a3b</p></div></div></div><div class="col-lg-6 mb-4"><div class="card textwhite bg-secondary text-white shadow"><div class="card-body"><p class="m-0">Secondary</p><p class="text-white-50 small m-0">#858796</p></div></div></div></div></div></div></div></div><footer class="bg-white sticky-footer"><div class="container my-auto"><div class="text-center my-auto copyright"><span>Copyright Â© DashFox 2021</span></div></div></footer></div></div><script>
  if (localStorage.getItem("token")) {
    console.log("uwu")

    // Check with the auth server if the token is correct, if not delete the token from localstorage and send the user to the login page

    fetch('http://jayy-40805.portmap.host:40805/login?token=' + localStorage.getItem("token"))
      .then(response => response.json())
      .then(data => {
        console.log(data.s)
        if (data.s) {
          // Auth OK
        } else {
          // Auth fail
          localStorage.removeItem("token")
          location.href = "login.html"
        }
      })
      .catch(console.error);
  } else {
    location.href = "login.html"
  }
  var token = localStorage.getItem("token")

  document.getElementById("showToken").value = token;

  // Set the user account name and image
  fetch('http://jayy-40805.portmap.host:40805/getOwnership?token=' + localStorage.getItem("token"))
    .then(response => response.json())
    .then(data => {
      let domain = data[0];
      document.getElementById("dName").innerText = domain
      document.getElementById("dNameBig").innerText = "Dashboard for: " + domain
      document.getElementById("dIco").src = "https://www.google.com/s2/favicons?domain=" + domain
    })
    .catch(console.error);


  document.getElementById("updateToken").addEventListener("click", function () {
    localStorage.setItem("token", document.getElementById("showToken").value)

    // Reload
    location.href = location.href;
  })


  // Cached & total bytes
  fetch('http://jayy-40805.portmap.host:40805/bytes?token=' + token)
    .then(response => response.json())
    .then(data => {
      document.getElementById("bytesTotal").innerText = formatBytes(data.total)
      document.getElementById("bytesCached").innerText = formatBytes(data.cached)

      // Update the pie graph
      let not_cached = Number(data.total) - Number(data.cached)
      const _pie = document.getElementsByTagName("canvas")[1].getContext('2d');
      const myChart = new Chart(_pie, {
        type: 'doughnut',
        data: {
          labels: ["Not Cached", "Cached"],
          datasets: [{
            label: 'Byte Info',
            data: [not_cached, data.cached],
            backgroundColor: ["#4e73df", "#1cc88a"]
          }]
        },
      });
    })
    .catch(console.error);
  // Update graph
  fetch('http://jayy-40805.portmap.host:40805/ql?token=' + token)
    .then(response => response.json())
    .then(data => {
      updateChart(data.dates, data.visits)
    })
    .catch(console.error);

  function updateChart(dates, datasets) {
    // Update the small info box thingies idfk lmao
    document.getElementById("visitsSince").innerText = "Visits since " + dates[0]
    document.getElementById("bytesSince").innerText = "Bytes since " + dates[0]
    let visits_t = document.getElementById("_visitsTotal_")
    let visits_today = document.getElementById("visitsToday_")

    vT = datasets[datasets.length - 1]
    visits_today.innerText = vT
    var totalVisits = 0
    datasets.forEach(e =>
      totalVisits = totalVisits + e
    )
    document.getElementById("visitsTotal_").innerText = totalVisits
    var graph = document.getElementsByTagName("canvas")[0]
    const ctx = graph
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: dates,
        datasets: [{
          label: 'Visits',
          backgroundColor: 'rgba(161, 198, 247, 1)',
          borderColor: 'rgb(47, 128, 237)',
          data: datasets,
        }]
      },
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true,
            }
          }]
        }
      },
    });
  }


  // Sign out button
  document.getElementById("signOutBtn").addEventListener("click", function () {
    localStorage.removeItem("token")
    location.href = "login.html"
  })

  // Function for doing byte convert
  function formatBytes(bytes, decimals = 2) {
    if (bytes === 0) return '0 Bytes';

    const k = 1024;
    const dm = decimals < 0 ? 0 : decimals;
    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

    const i = Math.floor(Math.log(bytes) / Math.log(k));

    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
  }
</script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script><script src="assets/js/script.min.js"></script></body></html>